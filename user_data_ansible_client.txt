#!/bin/bash
#Below ssh public key belongs to jenkins user on Jenkins Slave Node which will ssh to client machine & will be be pasted in /home/ec2-user/.ssh/authorized_keys file on the client. So replace it accordingly as per your current agent which you will use. 

hostnamectl set-hostname testvm-dev

mkdir /tmp/efs

mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport fs-05963285a6e43d414.efs.ap-south-1.amazonaws.com:/ /tmp/efs

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDsQFfN4uHs+fszQKzTsaGSzdgWZIxooQ6QVSBKVL/CIGkgHAA5gv350zU12M4z7GP2PEvkZWmDFGoKpgeWuUa/I6QNXsZ283hVf4ku1ZZPxG/dwwBEzt3R4VGqMU/0LS5aGMIDMLV/xDJFZMKY5Yw42bdLQ6endV9qqV9/40Y9rHC6tv3HeppeUnKbzpPuMxfztnhIbDF10QR3BMNyY2FXtAeVj5/TdDrJ63ZS21z0Kyj8N934HWhIicw6WbKijTYgbGFMwD8NSXUtsfJMsO8sygb1joSCS+DErE4Qxm6C6B3YI+BgGGPwrpFrTjEo9WojCWlJqqt98ZeNKICOipSh Jenkins agent key" >> /home/ec2-user/.ssh/authorized_keys
